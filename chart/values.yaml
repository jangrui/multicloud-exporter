fullname: multicloud-exporter
replicaCount: 1

image:
  registry: 
  repository: 
  tag: 
  pullPolicy: IfNotPresent

service:
  port: 9101
  type: ClusterIP
  nodePort:

headless:
  enabled: false
  name: ""

serviceMonitor:
  enabled: false
  labels: {}
  scheme: http
  interval: "60s"
  scrapeTimeout: "30s"
  metricRelabelings: []
  relabelings: []

hpa:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 70

probes:
  liveness:
    enabled: true
    path: /healthz
    initialDelaySeconds: 20
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
  readiness:
    enabled: true
    path: /metrics
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3

cluster:
  discovery: "" # values: headless|file|""
  svcName: ""   # required when discovery=headless
  file: ""      # required when discovery=file
  
  # Static sharding configuration (alternative to discovery)
  # When running in static mode (discovery=""), you can manually assign shards.
  # This maps to EXPORT_SHARD_TOTAL and EXPORT_SHARD_INDEX env vars.
  sharding:
    enabled: false
    total: 1
    index: 0

# Server 配置（可选）：如果设置，将创建 ConfigMap 并挂载到容器
# 如果未设置，将使用镜像内置的 server.yaml 配置
server: {}
#  port: 9101
#  page_size: 1000
#  discovery_ttl: "1h"
#  scrape_interval: "60s"
#  period_fallback: 60  # Period Fallback：当无法从元数据获取 Period 时的默认值（秒），默认 60
#  region_concurrency: 3
#  product_concurrency: 2
#  metric_concurrency: 5

# 环境变量覆盖（按需）：如果设置将覆盖 server.yaml 中的对应配置
# 所有环境变量都会传递给容器，支持覆盖 server.yaml 中的配置
env: {}
#  # 服务配置
#  EXPORTER_PORT: "9101"              # 监听端口；默认 9101
#  PAGE_SIZE: "1000"                  # 分页大小；默认 1000
#  
#  # 日志配置
#  LOG_LEVEL: "info"                  # 日志级别：debug, info, warn, error；默认 info
#  LOG_FORMAT: "json"                 # 日志格式：json, console；默认 json
#  LOG_OUTPUT: "stdout"               # 日志输出：stdout, file, both；默认 stdout
#  LOG_FILE: "logs/exporter.log"      # 日志文件路径；默认 logs/exporter.log
#  LOG_MAX_SIZE: "100"                # 日志文件最大大小（MB）；默认 100
#  LOG_MAX_BACKUPS: "3"               # 日志文件最大备份数；默认 3
#  LOG_MAX_AGE: "28"                  # 日志文件最大保留天数；默认 28
#  LOG_COMPRESS: "true"               # 是否压缩日志文件；默认 true
#  
#  # 采集配置
#  DISCOVERY_TTL: "1d"                # 资源发现缓存生命周期；支持 s/m/h/d；默认 1d
#  SCRAPE_INTERVAL: "60s"             # 采集间隔；支持 "60s", "1m" 等；默认 60s
#  PERIOD_FALLBACK: "60"              # Period Fallback 值（秒）；当无法从元数据获取 Period 时的默认值；默认 60
#  
#  # 并发配置
#  REGION_CONCURRENCY: "4"            # 区域级并发：同一账号下并行采集的地域数量（建议 1-8）；默认 4
#  PRODUCT_CONCURRENCY: "2"           # 产品级并发：同一地域下并行处理的命名空间数量（建议 1-4）；默认 2
#  METRIC_CONCURRENCY: "5"            # 指标级并发：同一地域、同一产品下并行处理的指标批次（建议 1-10）；默认 5
#  
#  # 安全配置
#  ADMIN_AUTH_ENABLED: "false"        # 是否启用管理接口认证；默认 false

security:
  adminSecretName: ""

accounts:
  # 分组式账号（推荐）：按云平台拆分，模板将生成 grouped 结构的 accounts.yaml
  grouped:
    aliyun: []
    #   - name: aliyun-acc-0
    #     regions: ["*"]
    #     resources: ["bwp", "clb", "s3", "alb", "nlb", "gwlb"]
    tencent: []
    #   - name: tencent-acc-0
    #     regions: ["*"]
    #     resources: ["clb", "bwp", "s3"]
    huawei: []
    #   - name: huawei-acc-0
    #     regions: ["*"]
    #     resources: ["bwp"]
    aws: []
    #   - name: aws-acc-0
    #     # AWS 的 S3 采集使用全局接口（ListBuckets），regions 可留空或使用 ["*"]
    #     regions: ["*"]
    #     resources: ["s3"]

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}

topologySpreadConstraints: []
  # - maxSkew: 1
  #   topologyKey: topology.kubernetes.io/zone
  #   whenUnsatisfiable: DoNotSchedule
  #   labelSelector:
  #     matchLabels:
  #       app.kubernetes.io/name: multicloud-exporter

# priorityClassName: "system-cluster-critical"

reloader:
  enabled: true
  useAuto: false
