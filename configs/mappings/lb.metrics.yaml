# 统一 LB 指标映射关系（Aliyun / Tencent）
# 说明：canonical 指代统一后的 `lb_*` 名称；各云平台原始指标在 providers 下声明，并给出单位与查询层的缩放建议。

canonical:
  traffic_rx_bps:
    aliyun:
      metric: TrafficRXNew
      unit: bit/s
      scale: 1
    tencent:
      metric: VipIntraffic
      unit: Mbps
      scale: 1000000
  traffic_tx_bps:
    aliyun:
      metric: TrafficTXNew
      unit: bit/s
      scale: 1
    tencent:
      metric: VipOuttraffic
      unit: Mbps
      scale: 1000000
  packet_rx:
    aliyun:
      metric: PacketRX
      unit: count/s
      scale: 1
    tencent:
      metric: VipInpkg
      unit: count/s
      scale: 1
  packet_tx:
    aliyun:
      metric: PacketTX
      unit: count/s
      scale: 1
    tencent:
      metric: VipOutpkg
      unit: count/s
      scale: 1
  drop_packet_rx:
    aliyun:
      metric: DropPacketRX
      unit: count/s
      scale: 1
    tencent:
      metric: Vipindroppkts
      unit: pps
      scale: 1
  drop_packet_tx:
    aliyun:
      metric: DropPacketTX
      unit: count/s
      scale: 1
    tencent:
      metric: Vipoutdroppkts
      unit: pps
      scale: 1

aliyun_only:
  qps:
    metric: Qps
    unit: count/s
  rt:
    metric: Rt
    unit: ms
  status_code_2xx:
    metric: StatusCode2xx
    unit: count/s
  status_code_3xx:
    metric: StatusCode3xx
    unit: count/s
  status_code_4xx:
    metric: StatusCode4xx
    unit: count/s
  status_code_5xx:
    metric: StatusCode5xx
    unit: count/s
  unhealthy_server_count:
    metric: UnhealthyServerCount
    unit: count
  healthy_server_count_with_rule:
    metric: HealthyServerCountWithRule
    unit: count
  instance_qps:
    metric: InstanceQps
    unit: count/s
  instance_rt:
    metric: InstanceRt
    unit: ms
  instance_packet_rx:
    metric: InstancePacketRX
    unit: count/s
  instance_packet_tx:
    metric: InstancePacketTX
    unit: count/s
  instance_traffic_rx_utilization_pct:
    metric: InstanceTrafficRXUtilization
    unit: ratio
    scale_hint: "Grafana 以 % 展示，不强制乘 100"
  instance_traffic_tx_utilization_pct:
    metric: InstanceTrafficTXUtilization
    unit: ratio
    scale_hint: "Grafana 以 % 展示，不强制乘 100"

# 腾讯云特有指标示例：保留原名语义，统一到 lb_tencent_* 前缀（可选）
# 实际暴露建议：若能等价映射到 canonical，则优先映射；否则以 provider 特有前缀暴露。

tencent_only:
  vconnum:
    metric: VConnum
    unit: count
  new_connection:
    metric: VNewConn
    unit: count
  in_traffic_bps_alt:
    metric: VIntraffic
    unit: bps
  out_traffic_bps_alt:
    metric: VOuttraffic
    unit: bps
