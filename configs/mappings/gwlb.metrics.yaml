# 统一 GWLB 指标映射关系（Aliyun / Tencent）
# 说明：canonical 指代统一后的 `gwlb_*` 名称；各云平台原始指标在 providers 下声明，并给出单位与查询层的缩放建议。
# 排序整理：2025-12-15；修改者：@jangrui；规则：按连接/流量/包速率/健康等类别分组展示（仅调整可读性，不改变键与字段）

prefix: gwlb
namespaces:
  aliyun: acs_gwlb
  tencent: QCE/GWLB
  aws: AWS/GatewayELB

canonical:
  # 连接类指标
  active_connection:
    description: "活跃连接数"
    aliyun:
      metric: ActiveConnection
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count
    tencent:
      metric: ConcurConn
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: count
  new_connection:
    description: "新建连接数"
    aliyun:
      metric: NewConnection
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count/s
    tencent:
      metric: NewConn
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: count/s

  # 流量类指标
  traffic_rx_bps:
    description: "入网流量"
    aliyun:
      metric: TrafficRX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: bit/s
      scale: 1
    tencent:
      metric: Intraffic
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: Mbps
      scale: 1000000
  traffic_tx_bps:
    description: "出网流量"
    aliyun:
      metric: TrafficTX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: bit/s
      scale: 1
    tencent:
      metric: Outtraffic
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: Mbps
      scale: 1000000
    # AWS GWLB ProcessedBytes is total. Skipping TX.

  # 包转发类
  packet_rx:
    description: "入网包速率"
    aliyun:
      metric: PacketRX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count/s
      scale: 1
    # Tencent GWLB 暂无包转发指标
  packet_tx:
    description: "出网包速率"
    aliyun:
      metric: PacketTX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count/s
      scale: 1
    # Tencent GWLB 暂无包转发指标

  # 健康检查指标
  unhealthy_server_count:
    description: "异常后端服务数"
    aliyun:
      metric: ServerGroupUnhealthyHostCount
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - listenerId
        - serverGroupId
      unit: count
    tencent:
      metric: Unhealthyrscount
      dimensions:
        - AppId
        - targetGroupId
      unit: count
  healthy_server_count:
    description: "健康后端服务数"
    aliyun:
      metric: ServerGroupHealthyHostCount
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - listenerId
        - serverGroupId
      unit: count
    # Tencent GWLB 暂无健康服务器计数指标

 
