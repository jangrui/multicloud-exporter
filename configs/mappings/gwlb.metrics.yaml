prefix: gwlb
namespaces:
  aliyun: acs_gwlb
  tencent: QCE/GWLB
  aws: AWS/GatewayELB

canonical:
  # ========================================
  # 全映射指标（3 家云厂商）
  # ========================================
  active_connection:
    description: "活跃连接数"
    aliyun:
      metric: ActiveConnection
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count
    tencent:
      metric: ConcurConn
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: count
    aws:
      metric: ActiveFlowCount
      dimensions:
        - LoadBalancer
      unit: count
  new_connection:
    description: "新建连接数"
    aliyun:
      metric: NewConnection
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count/s
    tencent:
      metric: NewConn
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: count/s
    aws:
      metric: NewFlowCount
      dimensions:
        - LoadBalancer
      unit: count
  unhealthy_server_count:
    description: "异常后端服务数"
    aliyun:
      metric: ServerGroupUnhealthyHostCount
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - listenerId
        - serverGroupId
      unit: count
    tencent:
      metric: Unhealthyrscount
      dimensions:
        - AppId
        - targetGroupId
      unit: count
    aws:
      metric: UnHealthyHostCount
      dimensions:
        - LoadBalancer
        - TargetGroup
      unit: count

  # ========================================
  # 部分映射指标（2 家云厂商）
  # ========================================
  healthy_server_count:
    description: "健康后端服务数"
    aliyun:
      metric: ServerGroupHealthyHostCount
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - listenerId
        - serverGroupId
      unit: count
    aws:
      metric: HealthyHostCount
      dimensions:
        - LoadBalancer
        - TargetGroup
      unit: count
  traffic_rx_bps:
    description: "入网流量"
    aliyun:
      metric: TrafficRX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: bit/s
      scale: 1
    tencent:
      metric: Intraffic
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: Mbps
      scale: 1000000
  traffic_tx_bps:
    description: "出网流量"
    aliyun:
      metric: TrafficTX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: bit/s
      scale: 1
    tencent:
      metric: Outtraffic
      dimensions:
        - AppId
        - gwLoadBalancerId
      unit: Mbps
      scale: 1000000

  # ========================================
  # 单独指标（阿里云专用）
  # ========================================
  packet_rx:
    description: "入网包速率"
    aliyun:
      metric: PacketRX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count/s
      scale: 1
  packet_tx:
    description: "出网包速率"
    aliyun:
      metric: PacketTX
      dimensions:
        - userId
        - regionId
        - availableZone
        - instanceId
        - addressIpVersion
      unit: count/s
      scale: 1

  # ========================================
  # 单独指标（AWS 专用）
  # ========================================
  consumed_lc_us:
    description: "消耗的 LCUs 数量"
    aws:
      metric: ConsumedLCUs
      dimensions:
        - LoadBalancer
      unit: count
  cross_zone_load_balancing_count:
    description: "跨可用区负载均衡数"
    aws:
      metric: CrossZoneLoadBalancingCount
      dimensions:
        - LoadBalancer
      unit: count
  processed_bytes:
    description: "处理字节数"
    aws:
      metric: ProcessedBytes
      dimensions:
        - LoadBalancer
      unit: Bytes
  processed_packets:
    description: "处理包数"
    aws:
      metric: ProcessedPackets
      dimensions:
        - LoadBalancer
      unit: count
