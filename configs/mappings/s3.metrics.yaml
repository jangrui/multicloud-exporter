# Unified Object Storage Metrics (Aliyun OSS / Tencent COS)
prefix: s3
namespaces:
  aliyun: acs_oss_dashboard
  tencent: QCE/COS

canonical:
  # Storage Usage
  storage_usage_bytes:
    description: "存储空间使用量"
    aliyun:
      metric: UserStorage
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: StdStorage # Approximation: Tencent separates storage types, Std is most common
      dimensions:
        - bucket
      unit: Bytes
      scale: 1

  # Traffic (Bytes) - Preferred for accuracy
  traffic_internet_rx_bytes:
    description: "公网入流量 (上传)"
    aliyun:
      metric: InternetRecv
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: InternetTrafficUp # Upload to Cloud
      dimensions:
        - bucket
      unit: Bytes
      scale: 1
  traffic_internet_tx_bytes:
    description: "公网出流量 (下载)"
    aliyun:
      metric: InternetSend
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: InternetTrafficDown # Download from Cloud
      dimensions:
        - bucket
      unit: Bytes
      scale: 1
  traffic_intranet_rx_bytes:
    description: "内网入流量 (上传)"
    aliyun:
      metric: IntranetRecv
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: InternalTrafficUp
      dimensions:
        - bucket
      unit: Bytes
      scale: 1
  traffic_intranet_tx_bytes:
    description: "内网出流量 (下载)"
    aliyun:
      metric: IntranetSend
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: InternalTrafficDown
      dimensions:
        - bucket
      unit: Bytes
      scale: 1
  traffic_cdn_rx_bytes:
    description: "CDN 回源入流量"
    aliyun:
      metric: UserCdnRecv
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: CdnOriginTraffic # Assuming exists based on pattern, or omit if unsure
      dimensions:
        - bucket
      unit: Bytes
      scale: 1
  traffic_cdn_tx_bytes:
    description: "CDN 回源出流量"
    aliyun:
      metric: UserCdnSend
      dimensions:
        - userId
        - BucketName
      unit: Bytes
      scale: 1
    tencent:
      metric: CdnTrafficDown
      dimensions:
        - bucket
      unit: Bytes
      scale: 1

  # Requests
  requests_total:
    description: "总请求数"
    aliyun:
      metric: TotalRequestCount
      dimensions:
        - userId
        - BucketName
      unit: count
      scale: 1
    tencent:
      metric: TotalRequests
      dimensions:
        - bucket
      unit: count
      scale: 1
  requests_get:
    description: "GET 请求数"
    aliyun:
      metric: GetObjectCount
      dimensions:
        - userId
        - BucketName
      unit: count
      scale: 1
    tencent:
      metric: GetRequests
      dimensions:
        - bucket
      unit: count
      scale: 1
  requests_put:
    description: "PUT 请求数"
    aliyun:
      metric: PutObjectCount
      dimensions:
        - userId
        - BucketName
      unit: count
      scale: 1
    tencent:
      metric: PutRequests
      dimensions:
        - bucket
      unit: count
      scale: 1
  requests_head:
    description: "HEAD 请求数"
    aliyun:
      metric: HeadObjectCount
      dimensions:
        - userId
        - BucketName
      unit: count
      scale: 1
    tencent:
      metric: HeadRequests
      dimensions:
        - bucket
      unit: count
      scale: 1

  # Availability & Errors
  availability_pct:
    description: "可用性/成功率"
    aliyun:
      metric: UserAvailability
      dimensions:
        - userId
        - BucketName
      unit: percent
      scale: 1
    tencent:
      metric: RequestsSuccessRate
      dimensions:
        - bucket
      unit: percent
      scale: 1
  response_server_error_count:
    description: "服务端错误数"
    aliyun:
      metric: ServerErrorCount
      dimensions:
        - userId
        - BucketName
      unit: count
      scale: 1
    tencent:
      metric: 5xxResponse
      dimensions:
        - bucket
      unit: count
      scale: 1

  latency_e2e_get_ms:
    description: "GET 端到端延迟"
    aliyun:
      metric: GetObjectE2eLatency
      dimensions:
        - userId
        - BucketName
      unit: ms
  latency_server_get_ms:
    description: "GET 服务端延迟"
    aliyun:
      metric: GetObjectServerLatency
      dimensions:
        - userId
        - BucketName
      unit: ms
  latency_e2e_put_ms:
    description: "PUT 端到端延迟"
    aliyun:
      metric: PutObjectE2eLatency
      dimensions:
        - userId
        - BucketName
      unit: ms
  latency_server_put_ms:
    description: "PUT 服务端延迟"
    aliyun:
      metric: PutObjectServerLatency
      dimensions:
        - userId
        - BucketName
      unit: ms
  bandwidth_internet_rx_bps:
    description: "公网入带宽"
    aliyun:
      metric: InternetRecvBandwidth
      dimensions:
        - userId
        - BucketName
      unit: bit/s
  bandwidth_internet_tx_bps:
    description: "公网出带宽"
    aliyun:
      metric: InternetSendBandwidth
      dimensions:
        - userId
        - BucketName
      unit: bit/s
  bandwidth_intranet_rx_bps:
    description: "内网入带宽"
    aliyun:
      metric: IntranetRecvBandwidth
      dimensions:
        - userId
        - BucketName
      unit: bit/s
  bandwidth_intranet_tx_bps:
    description: "内网出带宽"
    aliyun:
      metric: IntranetSendBandwidth
      dimensions:
        - userId
        - BucketName
      unit: bit/s
  cache_recv_bytes:
    description: "缓存入流量 (Bytes)"
    aliyun:
      metric: CacheRecv
      dimensions:
        - userId
        - instanceId
        - BucketName
      unit: Bytes
  cache_send_bytes:
    description: "缓存出流量 (Bytes)"
    aliyun:
      metric: CacheSend
      dimensions:
        - userId
        - instanceId
        - BucketName
      unit: Bytes
  cache_origin_recv_bytes:
    description: "缓存回源入流量 (Bytes)"
    aliyun:
      metric: CacheOriginRecv
      dimensions:
        - userId
        - instanceId
        - BucketName
      unit: Bytes
  cache_origin_send_bytes:
    description: "缓存回源出流量 (Bytes)"
    aliyun:
      metric: CacheOriginSend
      dimensions:
        - userId
        - instanceId
        - BucketName
      unit: Bytes
  object_count:
    description: "对象数量"
    aliyun:
      metric: ObjectCount
      dimensions:
        - userId
        - BucketName
      unit: count
  response_2xx_count:
    description: "2xx 响应数"
    tencent:
      metric: 2xxResponse
      dimensions:
        - bucket
      unit: count
  response_3xx_count:
    description: "3xx 响应数"
    tencent:
      metric: 3xxResponse
      dimensions:
        - bucket
      unit: count
  response_4xx_count:
    description: "4xx 响应数"
    tencent:
      metric: 4xxResponse
      dimensions:
        - bucket
      unit: count
  storage_ia_bytes:
    description: "低频存储用量 (Bytes)"
    tencent:
      metric: IaStorage
      dimensions:
        - bucket
      unit: Bytes
  storage_archive_bytes:
    description: "归档存储用量 (Bytes)"
    tencent:
      metric: DeepArcStorage
      dimensions:
        - bucket
      unit: Bytes
  traffic_replication_bytes:
    description: "跨区域复制流量 (Bytes)"
    tencent:
      metric: CrossRegionReplicationTraffic
      dimensions:
        - bucket
      unit: Bytes

 
