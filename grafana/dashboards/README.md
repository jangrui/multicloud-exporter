# 云产品监控大屏规划

## 1. 分层架构设计

### 1.1 分层概述

监控大屏采用四层架构设计，支持从全局到细节的逐层下钻分析：

- **L1：全局总览层** - 汇聚所有云产品的关键指标，快速发现异常产品
- **L2：产品概览层** - 展示单一云产品的详细监控视图
- **L3：区域实例层** - 定位特定产品在特定区域的实例级异常
- **L4：指标详情层** - 深入分析特定实例的具体指标表现

### 1.2 各层级详细说明

#### L1：所有云产品总览
- **目标**：提供全局视角，快速识别异常云产品
- **筛选器**：区域、服务商、账号、项目、应用
- **核心功能**：
  - 展示各云产品关键指标状态
  - 提供异常产品快速定位能力
  - 支持下钻到L2层级

#### L2：单一云产品总览
- **目标**：深入分析特定云产品的运行状况
- **筛选器**：区域、服务商、账号、项目、应用
- **核心功能**：
  - 展示产品维度的关键性能指标
  - 提供区域分布视图
  - 支持下钻到L3层级

#### L3：区域实例视图
- **目标**：定位特定区域内实例级别的异常
- **筛选器**：产品、区域、服务商、账号、项目、应用
- **核心功能**：
  - 展示区域内实例运行状态
  - 提供实例级别指标对比
  - 支持下钻到L4层级

#### L4：指标详情视图
- **目标**：深入分析特定实例的具体指标表现
- **筛选器**：实例、指标、服务商、账号、项目、应用
- **核心功能**：
  - 展示实例详细指标数据
  - 提供图表化趋势分析
  - 提供告警和阈值设置

## 2. 云产品覆盖范围

### 2.1 网络类产品

| 产品类型 | 云平台实现 |
|---------|-----------|
| BWP(共享带宽) | 阿里云CBWP、腾讯云BWP、华为云BWP |
| LB(传统负载均衡) | 阿里云SLB(CLB)、腾讯云CLB、华为云ELB |
| ALB(应用负载均衡) | 阿里云ALB、腾讯云ALB、华为云AELB |
| NLB(网络负载均衡) | 阿里云NLB、腾讯云NLB、华为云NLB |

### 2.2 存储类产品

| 产品类型 | 云平台实现 |
|---------|-----------|
| S3(对象存储) | 阿里云OSS、腾讯云COS、华为云OBS |

## 3. 筛选器体系设计

### 3.1 核心筛选维度

- **服务商/云平台**：支持主流云平台（阿里云、腾讯云、华为云、AWS、GCP等）
- **账号**：支持多账号管理，涵盖各云平台的所有账号
- **区域**：支持全球各区域选择
- **项目**：按项目维度进行资源隔离
- **业务**：按业务线进行分类管理

### 3.2 筛选器交互原则

- 上层筛选条件自动继承到下层
- 支持多选和全选操作
- 提供搜索和模糊匹配功能
- 筛选结果实时反馈到图表展示

## 4. 下钻联动机制

### 4.1 下钻路径

支持完整的层级下钻链路：
- L1 → L2：从全局总览下钻到具体产品视图
- L2 → L3：从产品视图下钻到区域实例视图
- L3 → L4：从实例视图下钻到指标详情视图

### 4.2 联动设计原则

- 筛选条件传递：上层筛选条件自动应用于下层
- 视图聚焦：下钻时自动聚焦到相关数据
- 上下文保留：支持返回上层视图时保持原有状态

## 5. 可视化增强功能

### 5.1 拓扑图展示

为了更好地理解云产品间的依赖关系和数据流向，建议在Grafana中集成拓扑图展示功能：

- 利用Grafana的插件生态系统（如FlowCharting、NodeGraph等）构建产品流向拓扑图
- 展示不同云产品间的连接关系和数据流
- 支持动态更新拓扑图状态，反映实时运行状况
- 提供交互式操作，点击拓扑节点可下钻到对应的产品监控视图

### 5.2 各层级可视化组件规范

根据不同层级的监控目标和用户需求，对可视化组件的使用进行如下规范：

#### L1层级（全局总览层）
- **目标**：快速识别异常产品，提供全局视角
- **可视化组件规范**：
  - 不应出现复杂的趋势图，避免信息过载
  - 主要使用状态指示器、径向仪表盘等简洁明了的组件
  - 使用汇总统计数字展示关键指标
  - 可使用简单的饼图或柱状图展示资源分布

#### L2层级（产品概览层）
- **目标**：深入分析特定云产品的运行状况
- **可视化组件规范**：
  - 趋势图应只展示Top10关键实例的数据，避免图表过于拥挤
  - 结合使用仪表盘、状态历史图等组件展示产品健康状况
  - 使用地理分布图展示产品在全球区域的部署情况
  - 可适当使用热力图展示区域负载情况

#### L3层级（区域实例层）
- **目标**：定位特定区域内实例级别的异常
- **可视化组件规范**：
  - 应尽量完整和丰富地展示区域内所有实例的指标
  - 使用多样化的时间序列图展示各实例详细趋势
  - 结合使用条形图、状态历史图等组件进行对比分析
  - 可使用表格展示详细的实例指标数据

#### L4层级（指标详情层）
- **目标**：深入分析特定实例的具体指标表现
- **可视化组件规范**：
  - 应最完整和丰富地展示特定实例的所有相关指标
  - 使用高精度的时间序列图展示指标变化趋势
  - 结合使用多种图表类型（如直方图、散点图等）进行深度分析
  - 提供详细的统计数据和异常标记

## 6. UI/UX设计原则

### 6.1 视觉设计目标

为了让监控大屏更加美观、灵动和大气，我们应遵循以下设计原则：

- **色彩丰富性**：使用鲜明且协调的色彩方案，不同状态（正常、警告、异常）应有明显区分
- **动态效果**：适当加入平滑的动画过渡效果，提升用户体验
- **布局美感**：采用现代化的网格布局，确保信息层次清晰且视觉平衡
- **品牌一致性**：保持与公司品牌形象一致的设计风格

### 6.2 图表多样化

除了传统的折线图和表格，建议引入更多类型的可视化组件：

- **Radial Gauge（径向仪表盘）**：用于展示单一关键指标的当前状态
- **Geomap（地理地图）**：展示全球资源分布和区域性能状况
- **Bar Gauge（条形仪表）**：横向展示多个指标的对比情况
- **Pie Chart（饼图）**：展示资源占比和分布情况
- **Status History（状态历史）**：以色彩编码展示指标状态变化历史
- **Time Series Aggregation（时间序列聚合）**：展示数据的统计摘要

### 6.3 交互体验优化

- **响应式设计**：确保大屏在不同分辨率和设备上都能良好显示
- **实时刷新**：支持自动刷新和手动刷新两种模式
- **自定义布局**：允许用户根据需要调整组件位置和大小
- **主题切换**：提供多种预设主题（明亮、暗黑、高对比度等）供用户选择
